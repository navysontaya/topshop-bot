<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Shopee Affiliate Generator</title>
  <script>
    async function getProductInfo() {
      const url = document.getElementById('url').value;
      const formData = new FormData();
      formData.append("url", url);
      const response = await fetch("/extract", {
        method: "POST",
        body: formData
      });
      const data = await response.json();
      if (data.error) {
        alert(data.error);
        return;
      }
      document.getElementById("result").innerHTML = `
        <h3>${data.title}</h3>
        <img src="${data.image}" width="200" />
        <p>ğŸ’¸ à¸£à¸²à¸„à¸²: ${data.price} à¸šà¸²à¸—</p>
        <p>ğŸ“‰ à¸ªà¹ˆà¸§à¸™à¸¥à¸”: ${data.discount}</p>
        <textarea id="post" rows="5" style="width:100%">${data.post}</textarea>
        <button onclick="copyPost()">ğŸ“‹ à¸„à¸±à¸”à¸¥à¸­à¸à¹‚à¸à¸ªà¸•à¹Œ</button>
      `;
    }

    function copyPost() {
      const text = document.getElementById("post");
      text.select();
      document.execCommand("copy");
      alert("à¸„à¸±à¸”à¸¥à¸­à¸à¹‚à¸à¸ªà¸•à¹Œà¹à¸¥à¹‰à¸§!");
    }
  </script>
</head>
<body>
  <h2>ğŸŒŸ à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸à¸ªà¸•à¹Œ Shopee Affiliate</h2>
  <input type="text" id="url" placeholder="à¸§à¸²à¸‡à¸¥à¸´à¸‡à¸à¹Œ Shopee à¸—à¸µà¹ˆà¸™à¸µà¹ˆ" style="width:100%" />
  <button onclick="getProductInfo()">à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸´à¸™à¸„à¹‰à¸²</button>
  <hr>
  <div id="result"></div>
</body>
</html>